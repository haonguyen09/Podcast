services:
  - type: web
    name: frontend
    env: docker
    docker:
      composeYamlPath: ./docker-compose.yml
      service: frontend
    envVars:
      - key: REACT_APP_API
        value: http://localhost:3005/api
    ports:
      - port: 3000

  - type: web
    name: backend
    env: docker
    docker:
      composeYamlPath: ./docker-compose.yml
      service: backend
    envVars:
      - key: PORT
        value: 3005
      - key: MONGO_DB
        value: mongodb+srv://haonguyen09450:18witkXUGMYgdnQv@cluster0.nedaywk.mongodb.net/PodcastDB?retryWrites=true&w=majority&appName=Cluster0
      - key: ACCESS_TOKEN
        value: access_token
      - key: REFRESH_TOKEN
        value: refresh_token
    ports:
      - port: 3005
    volumes:
      - type: persistent
        name: backend-uploads
        mountPath: /app/uploads

volumes:
  backend-uploads:
    type: persistent
