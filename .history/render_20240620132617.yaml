services:
  - name: frontend
    type: web
    buildCommand: docker build -t frontend ./front-end
    startCommand: docker run -p 3000:3000 -e REACT_APP_API=http://localhost:3005/api frontend
    healthCheckPath: /     # Adjust this path based on your frontend's health check endpoint

  - name: backend
    type: web
    buildCommand: docker build -t backend ./backend
    startCommand: docker run -p 3005:3005 -e PORT=3005 -e MONGO_DB=${MONGO_DB} -e ACCESS_TOKEN=${ACCESS_TOKEN} -e REFRESH_TOKEN=${REFRESH_TOKEN} backend
    environment:
      MONGO_DB: ${MONGO_DB}
      ACCESS_TOKEN: ${ACCESS_TOKEN}
      REFRESH_TOKEN: ${REFRESH_TOKEN}
    volumes:
      - name: backend-uploads
        path: /app/uploads
    healthCheckPath: /health  # Adjust this path based on your backend's health check endpoint
